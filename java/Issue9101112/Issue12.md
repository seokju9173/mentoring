## 자바의 애노테이션
### 애노테이션이란?
-	애노테이션(annotation)의 사전적 의미는 주석이다.
-	자바를 개발한 개발자들은 소스코드와 그에 대한 문서를 하나의 파일로 관리하는 것이 효율적이라고 판단하여 소스코드의 주석에 소스코드에 대한 정보를 저장하고 주석으로부터 HTML 문서를 생성해내는 프로그램인 **`Javadoc.exe`** 을 만들어 사용했다.
-	이처럼 프로그램의 소스코드 안에 다른 프로그램을 위한 정보를 미리 약속된 형식으로 포함시킨 것이 바로 **애노테이션** 이다.
-	애노테이션은 주석처럼 프로그래밍 언어에 영향을 미치지 않으면서 다른 프로그램에게 유용한 정보를 제공할 수 있다는 장점이 있다.
-	JDK에서 제공하는 표준 애노테이션은 주로 컴파일러를 위한 것으로 컴파일러에게 유용한 정보를 제공한다. JDK에서 제공하는 애노테이션은 **`java.lang.annotation`** 패키지에 포함되어 있다.
### 애노테이션의 용도
기존의 자바는 선언적 프로그래밍 방식으로 개발을 하면서 각 계층별 설정 데이터들을 XML에 명시했는데 서비스 규모가 클수록 설정이 많아지고 도메인 처리의 데이터들이 분산되어 있어 수정이 힘들었다.
-	애노테이션의 등장으로 데이터 유효성 검사 등 직접 클래스에 명시해 줄 수 있게 되어 수정이 필요할 때 쉽게 파악할 수 있게 되었고 애노테이션의 재사용도 가능해졌다.
-	AOP를 쉽게 구성할 수 있게 해준다.

## 애노테이션 정의하는 방법
**`@`** 기호를 붙이는 것을 제외하면 인터페이스를 정의하는 것과 동일하다.
```java
@interface 애노테이션이름 {
    타입 요소이름();  // 애노테이션의 요소를 선언.
    ...
}
```

### 표준 애노테이션
자바에서 기본적으로 제공해주는 컴파일러를 위한 애노테이션으로 개수가 많지 않다.
|애노테이션|설명|
|-----|----------|
|@Override|컴파일러에게 오버라이드한 메소드라는 것을 알린다.|
|@Deprecated|앞으로 사용하지 않을 것을 권장하는 대상에게 붙인다.|
|@SuppressWarnings|컴파일러가 특정 경고 메시지를 제거하는 애노테이션으로 개발자의 의도가 있는 코드이지만 컴파일러가 이를 알지 못하고 경고를 띄울 때 경고 메시지를 제거할 때 사용된다.|
|@SafeVarargs|제네릭 같은 가변인자 매개변수 사용시 경고를 무시한다. (JDK 1.7)|
|@FunctionalInterface|함수형 인터페이스라는 것을 알린다. (JDK 1.8)|
|@Native|native 메소드에서 참조되는 상수 앞에 붙인다. (JDK 1.8)|
|@Target|에노테이션이 적용 가능한 대상을 지정하는데 사용한다.|
|@Documented|애노테이션 정보가 javadoc으로 작성된 문서에 포함되게 한다.|
|@Inherited|애노테이션이 자손 클래스에 상속되도록 한다.|
|@Retention|애노테이션이 유지되는 범위를 지정하는데 사용한다.|
|@Repeatable|애노테이션을 반복해서 사용할 수 있게 한다. (JDK 1.8)|

이 중 **`Target`**, **`Documented`**, **`Inherited`**, **`Retention`**, **`Repeatable`** 애노테이션의 경우는 메타 애노테이션이다.

### 메타 애노테이션이란?
메타 애노테이션은 **애노테이션을 위한 애노테이션**, 즉 애노테이션에 붙이는 애노테이션으로 애노테이션을 정의할 때 애노테이션의 적용대상(target)이나 유지기간(retention) 등을 지정하는데 사용된다. **`java.lang.annotation`** 패키지에 포함되어 있다.

## @retention
-	애노테이션이 유지(retention)되는 기간(Life time)을 설정하는 애노테이션
-	애노테이션은 사용 용도에 따라 **`AnnotationName`** 을 어느 범위까지 유지할 것인지 지정해야 한다. 이러한 유지 정책은 **`java.lang.annotation.RetentionPolicy`** 열거 상수로 아래와 같이 정의된다.
|유지 정책|의미|
|-----|----------|
|SOURCE|소스파일에만 존재하고, 클래스파일에는 존재하지 않음. 컴파일러에 의해 버려짐.|
|CLASS|클래스파일에는 존재하지만 런타임 시 유지할 필요가 없다는 것을 알림. default값.|
|RUNTIME|클래스파일에도 존재하고 런타임에 VM에 의해 유지되어 리플렉션을 통해 클래스 파일의 정보를 읽어 처리가 가능.|

## @target
-	애노테이션이 적용 가능한 대상(동작 대상)을 지정한다.
-	여러 개의 값을 지정할 때는 배열처럼 괄호`{}`를 사용해야 한다.
-	만약 다른 타입이 온다면 컴파일 에러를 띄운다.
#### **`@Target`** 으로 지정할 수 있는 애노테이션 적용 대상의 종류
|대상 타입|의미|
|-----|----------|
|ANNOTATION_TYPE|애노테이션|
|CONSTRUCTOR|생성자|
|FIELD|필드(멤버 변수, enum 상수)|
|LOCAL_VARIABLE|지역 변수|
|METHOD|메소드|
|PACKAGE|자바 패키지|
|PARAMETER|매개변수|
|TYPE|타입(클래스, 인터페이스, enum)|
#### JDK 1.8 이후 추가
|대상 타입|의미|
|-----|----------|
|TYPE_PARAMETER|타입 매개변수|
|TYPE_USE|타입이 사용되는 모든 곳 (JDK 9 이후)|
|MODULE|모듈|
#### JDK 14 이후 추가
|대상 타입|의미|
|-----|----------|
|RECORD_COMPONENT|Record 컴포넌트|

## documented
**`Documented`** 는 애노테이션에 대한 정보가 javadoc으로 작성한 문서에 포함되도록 한다. 자바에서 제공하는 기본 애노테이션 중에서 **`@Override`** 와 **`@SuppressWarnings`** 을 제외하면 모두 **`Documented`** 가 붙어있다.

## 애노테이션 프로세서
애노테이션 프로세서는 컴파일 타임에 어노테이션을 스캔해서 처리하는 javac에 속한 빌드툴(hook)이다. 대표적인 예로 롬복(Lombok) 라이브러리가 있다.
> Lombok이란?
> 
> Java 라이브러리로 반복되는 getter, setter, toString .. 등의 반복 메소드 작성 코드를 줄여주는 코드 다이어트 라이브러리이다.

### 애노테이션 프로세서의 장점
애노테이션 프로세서는 애플리케이션을 구동하는 런타임 시점이 아니라, 컴파일 시점에 조작하여 사용하기 때문에 런타임에 대한 비용이 없다.

### 애노테이션 프로세서의 단점
롬복(Lombok) 같은 경우 기존 코드를 변경하는 방법이지만 공개된 API가 아닌 컴파일러 내부 클래스를 사용하여 기존 소스 코드를 조작하기 때문에 해킹에 가깝다고 할 수 있다.
